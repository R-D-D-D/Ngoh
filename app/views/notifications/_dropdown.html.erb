<li class="notifications-dropdown nav-item dropdown">

  <a class="nav-link dropdown-toggle text-light" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">

    <%= image_tag "notification.png" %>

    <% if current_user.notifications_unread.any? %>
      <span class="badge badge-pill badge-primary"><%= current_user.notifications_unread.count %></span>
    <% else %>
      <span class="badge badge-pill badge-secondary">0</span>
    <% end %>

  </a>

  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">

    <% if current_user.notifications.any? %>

      <div class="dropdown-item text-right">
        <small class="">
          <%= link_to 'clear all', notifications_clear_path, method: :delete %>
        </small>
      </div>

      <% current_user.notifications.reorder(created_at: :desc).limit(5).each do |notification| %>
        <%= render 'notifications/dropdown_item', notification: notification %>
      <% end %>

      <% if current_user.notifications.count > 5 %>
      <div class="dropdown-item text-center">
        <small class="">
          <% notifications_count = pluralize(current_user.notifications.count, 'Notification') %>
          <% if student? %>
            <%= link_to "See All #{notifications_count}", student_path(current_user, tab: 'notifications') %>
          <% elsif tutor? %>
            <%= link_to "See All #{notifications_count}", tutor_path(current_user, tab: 'notifications') %>
          <% end %>
        </small>
      </div>
    <% end %>
  </div>

<% else %>

  <div class="dropdown-item text-center disabled">
    <i>none for now</i>
  </div>

<% end %>

</li>
