<!--Title-->
<div class="row">
  <div class="col">
    <h1>
      <%= @course.title %>
    </h1>
  </div>
</div>

<!--Enroll/Quit Button-->
<% unless course_owner?(@course) %>
  <div class="row justify-content-center">
    <%= render 'courses/subscribe_form', course: @course %>
  </div>
<% end %>

<!--Edit Course Button-->
<% if tutor? && current_user?(@course.tutor) %>
  <div class="row">
    <div class="col">
      <%=
        link_to "Edit Course",
          edit_course_path(@course,
                           course_id: @course.id,
                           page: params[:page]),
          class: 'btn btn-secondary'
        %>
  </div>
  </div>
<% end %>

<!--Course Image-->
<% if @course.image.attached? %>
  <div class="row">
    <div class="col">
      <%= image_tag @course.image.variant(resize: "300x300"), class: "image" %>
    </div>
  </div>
<% end %>

<!--Course Content-->
<div class="row">
  <div class="col">
    <h2 class="content mt-2">
      <%= @course.content %>
    </h2>
  </div>
</div>

<!--Tags-->
<div class="row justify-content-start">
  <div class="col-6">
    <h2 class="text-left">Tags:</h2>
    <% @course.tags.each do |tag| %>
      <p class="btn btn-secondary btn-sm"><%= tag.name %></p>
    <% end %>
  </div>
</div>

<!--Course Tutor Gravatar-->
<div class="row">
  <div class="col">
    <%=
      link_to gravatar_for(@course.tutor, size: 80),
        tutor_path(@course.tutor),
        class: 'course_tutor_gravatar'
      %>
</div>
</div>

<!--Course Tutor Name-->
<div class="row">
  <div class="col">
    <h2 class="course_tutor text-left">
      Tutor: <%= link_to "#{@course.tutor.name}", tutor_path(@course.tutor) %>
  </h2>
  </div>
</div>

<!--Course Reviews-->
<div class="row reviews-section">

  <div class="row reviews-header">
    <h3><strong>Reviews (<%= @course.reviews.count %>)</strong></h3>
  </div>

  <% if subscribing?(@course) && current_user.review_for(@course).nil? %>
    <div class="row review-form">
      <div class="col-md-1 student">
        <%= gravatar_for(current_user, size: 70) %>
      </div>
      <div class="col-md-9 content">
        <%= render 'reviews/review_form' %>
      </div>
    </div>
  <% end %>

  <% if @course.reviews.any? %>
    <ol class="reviews">
      <%= render 'reviews/sort' %>
      <%= render @reviews %>
    </ol>
    <%= will_paginate @reviews %>
  <% end %>

</div>
