<div class="col-md-6 col-lg-3 my-3 p5">
  <div class="card height-10">
    <% if course.image.attached? %>
      <%= image_tag course.image.variant(resize: "100x100"), class: 'card-img-top' %>
    <% else %>
      <%= image_tag 'course_image.jpg', class: 'card-img-top' %>
    <% end %>
    <div class="centered text-light">
      <%= course.title %>
    </div>
    <div class="card-body p-3">
      <h5 class="card-title text-capitalize mb-1">
        <%= link_to course.title, course_path(course) %>
      </h5>
      <span class="rating">
        <%= render 'reviews/rating', rating: course.rating %>
        <% unless course.reviews.any? %>
          <small><i>(no reviews yet)</i></small>
        <% end %>
      </span>
      <p class="card-text ">
      <%= "#{course.content[0..50]}..." %>
      </p>

      <%= link_to "Take a look!", course_path(course), class: 'btn btn-secondary btn text-small' %>
      <% if local_assigns[:show_unread] %>
        <span class="badge badge-primary"><%= find_unread_from_course(course) %> unread</span>
      <% end %>
      <% unless course_owner?(course) %>
        <% if subscribing?(course) %>

          <!-- Unsubscribe Button -->
          <%=
            link_to "Quit",
              unsubscribe_path(course_id: course.id), class: 'btn btn-secondary btn-sm text-small'
            %>
        <% else %>
          <!-- Subscribe Button -->
          <% if course.price.nil? %>
            <%=
              link_to "Enroll for free!",
                subscribe_path(course_id: course.id), class: 'btn btn-secondary btn-sm text-small'
              %>
          <% else %>
            <%=
              link_to "Join for #{number_to_currency(course.price)}!",
                subscribe_path(course_id: course.id), class: 'btn btn-secondary btn-sm text-small'
              %>
          <% end %>
        <% end %>
      <% end %>
    </div>
    <div class="card-footer bg-light d-flex justify-content-start">
      <p class="text-center text-small">Tutor: <%= link_to course.tutor.name, tutor_path(course.tutor) %></p>
    </div>
  </div>
</div>
