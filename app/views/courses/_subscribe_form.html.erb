<% if subscribing?(course) %>

    <div class="modal fade" id="unsubscribe" tabindex="-1" role="dialog" aria-labelledby="reportForm" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="form">
        <div class="modal-content">

          <div class="modal-header">

            <h5 class="modal-title" id="unsubscribeLabel">Quit "<%= course.title %>"</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>

          </div>

          <div class="modal-body">
            <strong>Are you sure you want to quit this course?</strong><br>
            You will <strong>not</strong> be refunded, and will have to re-purchase it in the future to access its materials again.
          </div>

          <div class="modal-footer">
            <span class="buttons">
              <%= link_to "Yes, I'm sure.", unsubscribe_path(course_id: course.id), method: :delete, class: 'btn btn-danger' %>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">No, I've changed my mind</button>
            </span>
          </div>

        </div>
      </div>
    </div>

    <div class="col-md-6 d-flex justify-content-center">
    <!-- Unsubscribe Button -->
      <button type="button" class="unsubscribe-button btn btn-sm btn-block btn-light" data-toggle="modal" data-target="#unsubscribe">
        You are currently enrolled for this course. Click here to quit.
      </button>
    </div>

<% else %>

  <div class="modal fade" id="subscribe" tabindex="-1" role="dialog" aria-labelledby="reportForm" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="form">
      <div class="modal-content">

        <div class="modal-header">

          <h5 class="modal-title" id="subscribeLabel">Buy "<%= course.title %>"</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>

        </div>

        <div class="modal-body">
          <p>Are you sure you want to buy this course?</p>
        </div>

        <div class="modal-footer">
          <span class="buttons">
            <%= link_to "Yes, I'm sure!", subscribe_path(course_id: course.id), method: :post, class: 'btn btn-primary' %>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">No, I've changed my mind</button>
          </span>
        </div>

      </div>
    </div>
  </div>

  <div class="col-md-6 d-flex justify-content-center">
    <!-- Subscribe Button -->
    <button type="button" class="subscribe-button btn btn-lg btn-primary" data-toggle="modal" data-target="#subscribe">
      <% text = course.price.nil? ? "Enroll now for free!" : "Enroll now for #{number_to_currency(course.price)}!" %>
      <%= text %>
    </button>
  </div>

<% end %>
